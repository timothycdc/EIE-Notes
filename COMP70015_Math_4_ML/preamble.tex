% This is preamble.tex

% Commented out the following packages as requested

\usepackage{amsmath,amsfonts,amsthm,amssymb,mathtools}

% \usepackage{bookmark}
\usepackage{enumitem}
% \usepackage{hyperref,theoremref}
\usepackage[most,many,breakable]{tcolorbox}
\usepackage{xcolor}
\usepackage{pgfplots}
\pgfplotsset{compat=1.17}
\usepgfplotslibrary{colormaps}
\usetikzlibrary{calc}
\usetikzlibrary{positioning}

% Color definitions
\definecolor{myg}{RGB}{56, 140, 70}
\definecolor{myb}{RGB}{45, 111, 177}
\definecolor{myp}{RGB}{197, 92, 212}
\definecolor{mytheorembg}{HTML}{F2F2F9}
\definecolor{mytheoremfr}{HTML}{00007B}
\definecolor{myexamplebg}{HTML}{F2FBF8}
\definecolor{myexamplefr}{HTML}{88D6D1}
\definecolor{myexampleti}{HTML}{2A7F7F}

% Theorem styles with selective font changes
\tcbuselibrary{theorems,skins,hooks}
\newtcbtheorem[number within=section]{Theorem}{Theorem}
{enhanced, breakable, colback=mytheorembg, frame hidden, boxrule=0sp, 
 borderline west={2pt}{0pt}{mytheoremfr}, sharp corners, detach title, 
 before upper={\renewcommand{\familydefault}{\sfdefault}\selectfont\tcbtitle\par\smallskip}, 
 coltitle=mytheoremfr, fonttitle=\bfseries\sffamily, description font=\mdseries, 
 separator sign none, segmentation style={solid, mytheoremfr}}{th}

\newtcbtheorem[number within=section]{corollary}{Corollary}
{enhanced, breakable, colback=myp!10, frame hidden, boxrule=0sp, 
 borderline west={2pt}{0pt}{myp!85!black}, sharp corners, detach title, 
 before upper={\renewcommand{\familydefault}{\sfdefault}\selectfont\tcbtitle\par\smallskip}, 
 coltitle=myp!85!black, fonttitle=\bfseries\sffamily, description font=\mdseries, 
 separator sign none, segmentation style={solid, myp!85!black}}{th}

\newtcbtheorem[number within=section]{lemma}{Lemma}
{enhanced, breakable, colback=myg!10, frame hidden, boxrule=0sp, 
 borderline west={2pt}{0pt}{myg}, sharp corners, detach title, 
 before upper={\renewcommand{\familydefault}{\sfdefault}\selectfont\tcbtitle\par\smallskip}, 
 coltitle=myg!85!black, fonttitle=\bfseries\sffamily, description font=\mdseries, 
 separator sign none, segmentation style={solid, myg!85!black}}{th}

\newtcbtheorem[number within=section]{claim}{Claim}
{enhanced, breakable, colback=myg!10, frame hidden, boxrule=0sp, 
 borderline west={2pt}{0pt}{myg}, sharp corners, detach title, 
 before upper={\renewcommand{\familydefault}{\sfdefault}\selectfont\tcbtitle\par\smallskip}, 
 coltitle=myg!85!black, fonttitle=\bfseries\sffamily, description font=\mdseries, 
 separator sign none, segmentation style={solid, myg!85!black}}{th}

\newtcbtheorem[number within=section]{Example}{Example}
{colback=myexamplebg, breakable, colframe=myexamplefr, coltitle=myexampleti, 
 boxrule=1pt, sharp corners, detach title, 
 before upper={\renewcommand{\familydefault}{\sfdefault}\selectfont\tcbtitle\par\smallskip}, 
 fonttitle=\bfseries\sffamily, description font=\mdseries, 
 separator sign none, description delimiters parenthesis,
 left=1mm, % Set left margin
 right=1mm % Set right margin
}{ex}

\newtcbtheorem[number within=section]{sidenotebox}{Note}
{colback=myexamplebg, breakable, colframe=myexamplefr, coltitle=myexampleti, 
 boxrule=1pt, sharp corners, detach title, 
 before upper={\renewcommand{\familydefault}{\sfdefault}\selectfont\tcbtitle\par\smallskip}, 
 fonttitle=\bfseries\sffamily, description font=\mdseries, 
 separator sign none, description delimiters={}, % Remove parentheses
 left=1mm, % Set left margin
 right=1mm % Set right margin
}{sn}


\newtcolorbox{highlightbox}[2][]{%
    colback=myexamplebg, 
    breakable, 
    colframe=myexamplefr, 
    coltitle=myexampleti, 
    boxrule=1pt, 
    sharp corners, 
    before upper={\renewcommand{\familydefault}{\sfdefault}\selectfont\tcbtitle\par\smallskip}, 
    fonttitle=\bfseries\sffamily, 
    description font=\mdseries, 
    separator sign none, 
    description delimiters parenthesis, 
    left=1mm, % Set left margin
    right=1mm, % Set right margin
    top=1mm,
}

\newtcbtheorem[number within=section]{sidenoteboxsmall}{Note}
{colback=myexamplebg, breakable, colframe=myexamplefr, coltitle=myexampleti, 
 boxrule=1pt, sharp corners, detach title, 
 before upper={\renewcommand{\familydefault}{\sfdefault}\selectfont\tcbtitle\par\smallskip}, 
 fonttitle=\bfseries\sffamily, description font=\mdseries, 
 separator sign none, description delimiters={}, % Remove parentheses
 left=1mm, % Set left margin
 right=1mm % Set right margin
}{sn}


\newtcolorbox{highlightboxsmall}[2][]{%
    colback=myexamplebg, 
    breakable, 
    colframe=myexamplefr, 
    coltitle=myexampleti, 
    boxrule=1pt, 
    sharp corners, 
    before upper={\renewcommand{\familydefault}{\sfdefault}\selectfont\tcbtitle\par\smallskip}, 
    fonttitle=\bfseries\sffamily, 
    description font=\mdseries, 
    separator sign none, 
    description delimiters parenthesis, 
    left=1mm, % Set left margin
    right=1mm, % Set right margin
    top=1mm,
}

% Command shortcuts
\newcommand{\thm}[3][]{\begin{Theorem}{#2}{#1}#3\end{Theorem}}
\newcommand{\cor}[3][]{\begin{corollary}{#2}{#1}#3\end{corollary}}
\newcommand{\lem}[3][]{\begin{lemma}{#2}{#1}#3\end{lemma}}
\newcommand{\clm}[3][]{\begin{claim}{#2}{#1}#3\end{claim}}
\newcommand{\ex}[3][]{\begin{Example}{#2}{#1}#3\end{Example}}
\newcommand{\hl}[2][]{\begin{highlightbox}{#1}#2\end{highlightbox}}
\newcommand{\sn}[3][]{\begin{sidenotebox}{#2}{#1}#3\end{sidenotebox}}
\newcommand{\sns}[3][]{\begin{sidenoteboxsmall}{#2}{#1}#3\end{sidenoteboxsmall}}
\newcommand{\hls}[2][]{\begin{highlightboxsmall}{#1}#2\end{highlightboxsmall}}


% Define custom tcolorbox environments with smaller horizontal margins
\newtcolorbox[auto counter,number within=section]{definitionbox}[2][]{%
    colback=blue!5!white,
    colframe=blue!60!black,
    arc=0mm,
    sharp corners=all,
    fonttitle=\bfseries,
    title=#2 \hfill Definition \thetcbcounter #1,
    left=1mm,
    right=1mm 
}

\newtcolorbox[auto counter,number within=section]{extrabox}[2][]{%
    colback=black!5!white,
    colframe=black!65,
    arc=0mm,
    sharp corners=all,
    fonttitle=\bfseries,
    title=#2 \hfill \textit{Non-Examinable} \thetcbcounter #1,
    left=1mm, 
    right=1mm
}

\newtcolorbox[auto counter,number within=section]{examplebox}[2][]{%
    colback=orange!5!white,
    breakable,
    colframe=orange!75!black,
    arc=0mm,
    sharp corners=all,
    fonttitle=\bfseries,
    title=#2 \hfill Example Q \thetcbcounter #1,
    left=1mm, 
    right=1mm 
}

\newtcolorbox[auto counter,number within=section]{exambox}[3][]{%
    colback=purple!5!white,
    breakable,
    colframe=purple!75!black,
    arc=0mm,
    sharp corners=all,
    fonttitle=\bfseries,
    title=Q#2 - #3 \hfill Exam Q \thetcbcounter #1,
    left=1mm, 
    right=1mm 
}

% \newtcolorbox[auto counter,number within=section]{commentbox}[2][]{%
%     colback=violet!5!white,
%     colframe=violet!70!black,
%     coltitle=white, % White title text
%     arc=0mm,
%     sharp corners=all,
%     fonttitle=\bfseries,
%     title=#2 \hfill Comment,
%     left=1mm, 
%     right=1mm 
% }

\newtcolorbox[auto counter,number within=section]{referencebox}[2][]{%
    colback=green!5!white,
    colframe=green!65!black,
    coltitle=white, % White title text
    arc=0mm,
    sharp corners=all,
    fonttitle=\bfseries,
    title=#2 \hfill Reference ,%\thetcbcounter #1,
    left=1mm, 
    right=1mm 
}

\newtcolorbox[auto counter,number within=section]{intuitbox}[2][]{%
    colback=teal!5!white,
    colframe=teal!95!black,
    coltitle=white, % White title text
    arc=0mm,
    sharp corners=all,
    fonttitle=\bfseries,
    title=#2 \hfill Intuition \thetcbcounter #1,
    left=1mm, 
    right=1mm 
}

% Command shortcuts for custom tcolorbox environments

\newcommand{\defb}[3][]{\begin{definitionbox}{#2}#3\end{definitionbox}}
\newcommand{\extrab}[3][]{\begin{extrabox}{#2}#3\end{extrabox}}
\newcommand{\egb}[3][]{\begin{examplebox}{#2}#3\end{examplebox}}
\newcommand{\examb}[4][]{\begin{exambox}{#2}{#3}#4\end{exambox}}
% \newcommand{\commentb}[3][]{\begin{commentbox}{#2}#3\end{commentbox}}
\newcommand{\refb}[3][]{\begin{referencebox}{#2}#3\end{referencebox}}
\newcommand{\intuitb}[3][]{\begin{intuitbox}{#2}#3\end{intuitbox}}

% Define smaller custom tcolorbox environments with modified configurations
\newtcolorbox[auto counter,number within=section]{smalldefinitionbox}[2][]{%
  enhanced,
  before upper=\setlength{\parskip}{\bigskipamount},
  bottomrule=4.5mm,
  colback=blue!5!white,
  colframe=blue!60!black,
  arc=0mm,
  sharp corners=all,
  fonttitle=\bfseries\scriptsize,
  title={\color{white}#2},
  before upper={\renewcommand{\familydefault}{\sfdefault}\selectfont\tcbtitle\par\smallskip},
  before=\par\smallskip\noindent,
  after=\par\smallskip,
  top=1mm,
  bottom=2mm,
  left=0.5mm,
  right=0.5mm,
  overlay={
    \node[anchor=south west,fill=blue!60!black,text=white,inner sep=2pt,outer sep=0pt,align=left] at ([xshift=1mm,yshift=1mm]frame.south west) {\parbox{\dimexpr\linewidth-4mm\relax}{\scriptsize\bfseries\color{white} \hfill Definition \thetcbcounter #1}};
  }
}

% Define smaller custom tcolorbox environment for smallexambox with modified configurations
\newtcolorbox[auto counter,number within=section]{smallexambox}[2][]{%
  enhanced,
  before upper=\setlength{\parskip}{\bigskipamount},
  bottomrule=4.5mm,
  colback=purple!5!white,
  colframe=purple!75!black,
  arc=0mm,
  sharp corners=all,
  fonttitle=\bfseries\scriptsize,
  title={\color{white}Q#2},
  before upper={\renewcommand{\familydefault}{\sfdefault}\selectfont\tcbtitle\par\smallskip},
  before=\par\smallskip\noindent,
  after=\par\smallskip,
  top=1mm,
  bottom=2mm,
  left=0.5mm,
  right=0.5mm,
  overlay={
    \node[anchor=south west,fill=purple!75!black,text=white,inner sep=2pt,outer sep=0pt,align=left] at ([xshift=1mm,yshift=1mm]frame.south west) {\parbox{\dimexpr\linewidth-4mm\relax}{\scriptsize\bfseries\color{white} \hfill Exam Q \thetcbcounter}};
  }
}

\newtcolorbox[auto counter,number within=section]{smallextrabox}[2][]{%
  enhanced,
  before upper=\setlength{\parskip}{\bigskipamount},
  bottomrule=4.5mm,
  colback=black!5!white,
  colframe=black!65,
  arc=0mm,
  sharp corners=all,
  fonttitle=\bfseries\scriptsize,
  title={\color{white}#2},
  before upper={\renewcommand{\familydefault}{\sfdefault}\selectfont\tcbtitle\par\smallskip},
  before=\par\smallskip\noindent,
  after=\par\smallskip,
  top=1mm,
  bottom=2mm,
  left=0.5mm,
  right=0.5mm,
  overlay={
    \node[anchor=south west,fill=black!65,text=white,inner sep=2pt,outer sep=0pt,align=left] at ([xshift=1mm,yshift=1mm]frame.south west) {\parbox{\dimexpr\linewidth-4mm\relax}{\scriptsize\bfseries\color{white} \hfill \textit{Non-Examinable} \thetcbcounter #1}};
  }
}

\newtcolorbox[auto counter,number within=section]{smallexamplebox}[2][]{%
  enhanced,
  before upper=\setlength{\parskip}{\bigskipamount},
  bottomrule=4.75mm,
  colback=orange!5!white,
  breakable,
  colframe=orange!75!black,
  arc=0mm,
  sharp corners=all,
  fonttitle=\bfseries\scriptsize,
  title={\color{white}#2},
  before upper={\renewcommand{\familydefault}{\sfdefault}\selectfont\tcbtitle\par\smallskip},
  before=\par\smallskip\noindent,
  after=\par\smallskip,
  top=1mm,
  bottom=2mm,
  left=0.5mm,
  right=0.5mm,
  overlay={
    \node[anchor=south west,fill=orange!75!black,text=white,inner sep=2pt,outer sep=0pt,align=left] at ([xshift=1mm,yshift=1mm]frame.south west) {\parbox{\dimexpr\linewidth-4mm\relax}{\scriptsize\bfseries\color{white} \hfill Example Q \thetcbcounter #1}};
  }
}



\newtcolorbox[auto counter,number within=section]{smallreferencebox}[2][]{%
  enhanced,
  before upper=\setlength{\parskip}{\bigskipamount},
  bottomrule=4.5mm,
  colback=green!5!white,
  colframe=green!65!black,
  arc=0mm,
  sharp corners=all,
  fonttitle=\bfseries\scriptsize,
  title={\color{white}#2},
  before upper={\renewcommand{\familydefault}{\sfdefault}\selectfont\tcbtitle\par\smallskip},
  before=\par\smallskip\noindent,
  after=\par\smallskip,
  top=1mm,
  bottom=2mm,
  left=0.5mm,
  right=0.5mm,
  overlay={
    \node[anchor=south west,fill=green!65!black,text=white,inner sep=2pt,outer sep=0pt,align=left] at ([xshift=1mm,yshift=1mm]frame.south west) {\parbox{\dimexpr\linewidth-4mm\relax}{\scriptsize\bfseries\color{white} \hfill Reference \thetcbcounter #1}};
  }
}

\newtcolorbox[auto counter,number within=section]{smallintuitbox}[2][]{%
  enhanced,
  before upper=\setlength{\parskip}{\bigskipamount},
  bottomrule=4.5mm,
  colback=teal!5!white,
  colframe=teal!95!black,
  coltitle=white,
  arc=0mm,
  sharp corners=all,
  fonttitle=\bfseries\scriptsize,
  title={\color{white}#2},
  before upper={\renewcommand{\familydefault}{\sfdefault}\selectfont\tcbtitle\par\smallskip},
  before=\par\smallskip\noindent,
  after=\par\smallskip,
  top=1mm,
  bottom=2mm,
  left=0.5mm,
  right=0.5mm,
  overlay={
    \node[anchor=south west,fill=teal!95!black,text=white,inner sep=2pt,outer sep=0pt,align=left] at ([xshift=1mm,yshift=1mm]frame.south west) {\parbox{\dimexpr\linewidth-4mm\relax}{\scriptsize\bfseries\color{white} \hfill Intuition \thetcbcounter #1}};
  }
}
% Command shortcuts for smaller custom tcolorbox environments
\newcommand{\defsb}[3][]{\begin{smalldefinitionbox}{#2}#3\end{smalldefinitionbox}}
\newcommand{\extrasb}[3][]{\begin{smallextrabox}{#2}#3\end{smallextrabox}}
\newcommand{\egsb}[3][]{\begin{smallexamplebox}{#2}#3\end{smallexamplebox}}
\newcommand{\examsb}[4][]{\begin{smallexambox}{#2 - #3}#4\end{smallexambox}}
\newcommand{\refsb}[3][]{\begin{smallreferencebox}{#2}#3\end{smallreferencebox}}
\newcommand{\intuitsb}[3][]{\begin{smallintuitbox}{#2}#3\end{smallintuitbox}}

